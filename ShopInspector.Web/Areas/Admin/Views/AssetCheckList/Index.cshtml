@using ShopInspector.Core.Entities
@model PaginatedList<ShopInspector.Core.Entities.AssetCheckList>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Asset Checklist";
    
    // Group checklists by asset for better display - use proper typing
    var assetGroups = new List<IGrouping<object, ShopInspector.Core.Entities.AssetCheckList>>();
    
    if (Model != null)
    {
        assetGroups = Model.GroupBy(x => new { 
            AssetId = x.AssetID, 
            AssetName = x.Asset?.AssetName ?? "Unknown Asset",
            AssetCode = x.Asset?.AssetCode,
            AssetLocation = x.Asset?.AssetLocation 
        })
        .OrderBy(g => g.Key.AssetName)
        .ToList<IGrouping<object, ShopInspector.Core.Entities.AssetCheckList>>();
    }
    
    var totalAssets = assetGroups.Count();
    var totalChecklists = Model?.Count() ?? 0;
}

<div class="asset-page">
    <!-- Header row: title left, add button right (same line) -->
    <div class="asset-header-row">
        <h2 class="asset-title">Asset Checklists</h2>
        <div class="asset-header-actions">
            <button type="button" class="btn btn-outline-secondary me-2" onclick="toggleViewMode()" id="viewToggle">
                <i class="bi bi-grid-3x3-gap"></i> <span>Grouped View</span>
            </button>
            <a asp-area="Admin"
               asp-controller="AssetCheckList"
               asp-action="Create"
               class="btn btn-primary asset-add-btn"
               title="Add Checklist">
                <i class="bi bi-plus-circle"></i> <span>Add Checklists</span>
            </a>
        </div>
    </div>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show mt-3" role="alert">
            <i class="bi bi-check-circle-fill"></i> @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }
    @if (TempData["WarningMessage"] != null)
    {
        <div class="alert alert-warning alert-dismissible fade show mt-3" role="alert">
            <i class="bi bi-exclamation-triangle-fill"></i> @TempData["WarningMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show mt-3" role="alert">
            <i class="bi bi-exclamation-triangle-fill"></i> @TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <!-- Search Section -->
    <div class="search-section">
        <div class="search-wrapper">
            <div class="search-input-group">
                <i class="bi bi-search search-icon"></i>
                <input type="text" 
                       id="searchInput" 
                       class="search-input" 
                       placeholder="Search by asset name, checklist name, or location..." 
                       value="@ViewData["SearchTerm"]"
                       autocomplete="off">
                <button type="button" class="clear-search-btn" id="clearSearch">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
            <div class="search-info">
                <i class="bi bi-info-circle"></i>
                <span id="searchResults">
                    @if (Model?.TotalCount > 0)
                    {
                        <span class="search-results-count">@Model.TotalCount</span>
                        <span> asset checklist@(Model.TotalCount == 1 ? "" : "s") found</span>
                    }
                    else
                    {
                        <span>No asset checklists found</span>
                    }
                </span>
            </div>
        </div>
    </div>

    <!-- Summary Section -->
    @if (totalChecklists > 0)
    {
        <div class="row mt-3 mb-3">
            <div class="col-md-3">
                <div class="card border-primary">
                    <div class="card-body text-center">
                        <h4 class="text-primary">@totalAssets</h4>
                        <small class="text-muted">Assets with Checklists</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card border-success">
                    <div class="card-body text-center">
                        <h4 class="text-success">@totalChecklists</h4>
                        <small class="text-muted">Total Checklist Assignments</small>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card border-info">
                    <div class="card-body">
                        <small class="text-muted">View Options:</small>
                        <p class="mb-0">
                            <i class="bi bi-info-circle"></i> 
                            Switch between grouped view (by asset) and detailed view (individual rows)
                        </p>
                    </div>
                </div>
            </div>
        </div>
    }

    <!-- Grouped View (Default) -->
    <div id="groupedView" class="mt-3">
        @if (assetGroups.Any())
        {
            <div class="row">
                @foreach (var assetGroup in assetGroups)
                {
                    var checklists = assetGroup.ToList();
                    var activeCount = checklists.Count(c => c.Active);
                    var groupKey = (dynamic)assetGroup.Key;
                    <div class="col-lg-6 col-xl-4 mb-4">
                        <div class="card border-left-primary h-100">
                            <div class="card-header bg-light d-flex justify-content-between align-items-start">
                                <div>
                                    <h6 class="mb-1 text-primary font-weight-bold">@groupKey.AssetName</h6>
                                    <small class="text-muted">
                                        @if (!string.IsNullOrEmpty(groupKey.AssetCode))
                                        {
                                            <span class="badge badge-light me-1">@groupKey.AssetCode</span>
                                        }
                                        @if (!string.IsNullOrEmpty(groupKey.AssetLocation))
                                        {
                                            <i class="bi bi-geo-alt"></i> @groupKey.AssetLocation
                                        }
                                    </small>
                                </div>
                                <span class="badge bg-info">@checklists.Count checklist@(checklists.Count != 1 ? "s" : "")</span>
                            </div>
                            <div class="card-body">
                                <div class="checklist-items">
                                    @foreach (var checklist in checklists.OrderBy(c => c.DisplayOrder))
                                    {
                                        <div class="checklist-item">
                                            <div class="checklist-info">
                                                <div class="checklist-name">
                                                    <i class="bi bi-check-square text-success"></i>
                                                    @checklist.InspectionCheckList?.InspectionCheckListName
                                                </div>
                                                <small class="text-muted">Order: @checklist.DisplayOrder</small>
                                            </div>
                                            <div class="checklist-status-actions">
                                                @if (checklist.Active)
                                                {
                                                    <span class="badge bg-success">Active</span>
                                                }
                                                else
                                                {
                                                    <span class="badge bg-secondary">Inactive</span>
                                                }
                                                <div class="btn-group" role="group">
                                                    <a asp-area="Admin" asp-controller="AssetCheckList" asp-action="Edit" asp-route-id="@checklist.AssetCheckListID"
                                                       class="btn btn-action btn-outline-primary" title="Edit">
                                                        <i class="bi bi-pencil"></i>
                                                    </a>
                                                    <form asp-area="Admin"
                                                          asp-controller="AssetCheckList"
                                                          asp-action="Delete"
                                                          asp-route-id="@checklist.AssetCheckListID"
                                                          method="post"
                                                          class="d-inline delete-form"
                                                          data-confirm="Are you sure you want to delete this checklist assignment?">
                                                        @Html.AntiForgeryToken()
                                                        <button type="submit" class="btn btn-action btn-outline-danger" title="Delete">
                                                            <i class="bi bi-trash"></i>
                                                        </button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                            <div class="card-footer bg-light text-center">
                                <small class="text-muted">
                                    @activeCount of @checklists.Count checklist@(checklists.Count != 1 ? "s" : "") active
                                </small>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="text-center text-muted py-5">
                <i class="bi bi-inbox" style="font-size: 3rem; opacity: 0.5;"></i>
                <h5 class="mt-3">No asset checklists found</h5>
                <p>Start by <a asp-area="Admin" asp-controller="AssetCheckList" asp-action="Create">creating your first asset checklist</a>.</p>
            </div>
        }
    </div>

    <!-- Table View (Hidden by default) -->
    <div id="tableContainer" class="mt-3" style="display: none;">
        @await Html.PartialAsync("_TablePartial", Model)
    </div>
</div>

@section Scripts {
    <script src="~/js/admin-actions.js"></script>
    <script>
        // Optimized variables and configuration
        const CONFIG = {
            viewMode: 'grouped',
            pageSize: 5,
            searchDebounceMs: 500,
            routes: {
                loadTable: '/Admin/AssetCheckList/LoadTable',
                search: '/Admin/AssetCheckList',
                inspectionHistory: '/Admin/Inspection/History',
                assetDetails: '/Admin/Asset'
            }
        };

        let currentViewMode = CONFIG.viewMode;
        let currentPageSize = CONFIG.pageSize;
        let currentSearchTerm = '@ViewData["SearchTerm"]';
        let searchTimeout;

        // Optimized DOM ready function
        $(document).ready(function() {
            initializeSearch();
            loadSavedViewMode();
        });

        // Initialize search functionality with better performance
        function initializeSearch() {
            const $searchInput = $('#searchInput');
            const $clearButton = $('#clearSearch');

            // Handle search input with optimized debouncing
            $searchInput.on('input', function() {
                const searchTerm = $(this).val().trim();
                
                // Show/hide clear button efficiently
                $clearButton.toggle(searchTerm.length > 0);

                // Clear previous timeout and set new one
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => performSearch(searchTerm), CONFIG.searchDebounceMs);
            });

            // Handle Enter key
            $searchInput.on('keypress', function(e) {
                if (e.which === 13) { // Enter key
                    clearTimeout(searchTimeout);
                    performSearch($(this).val().trim());
                }
            });

            // Clear search
            $clearButton.on('click', function() {
                $searchInput.val('').focus();
                $(this).hide();
                performSearch('');
            });
        }

        // Load saved view mode from localStorage
        function loadSavedViewMode() {
            const savedMode = localStorage.getItem('assetChecklistViewMode');
            if (savedMode === 'detailed') {
                toggleViewMode();
            }
        }

        // Optimized search function
        function performSearch(searchTerm) {
            currentSearchTerm = searchTerm;
            console.log('AssetCheckList searching for:', searchTerm);
            
            // Use URLSearchParams for better URL handling
            const url = new URL(CONFIG.routes.search, window.location.origin);
            if (searchTerm) {
                url.searchParams.set('searchTerm', searchTerm);
            }
            
            window.location.href = url.toString();
        }

        // Optimized search results update
        function updateSearchResultsInfo(totalCount, searchTerm) {
            const $resultsSpan = $('#searchResults');
            const countText = totalCount === 1 ? 'checklist' : 'checklists';
            
            if (totalCount > 0) {
                const searchText = searchTerm ? ` for "<strong>${searchTerm}</strong>"` : '';
                $resultsSpan.html(
                    `<span class="search-results-count">${totalCount}</span> ` +
                    `asset ${countText} found${searchText}`
                );
            } else {
                const searchText = searchTerm ? ` for "<strong>${searchTerm}</strong>"` : '';
                $resultsSpan.html(`No asset checklists found${searchText}`);
            }
        }

        // Optimized view mode toggle
        function toggleViewMode() {
            const $groupedView = $('#groupedView');
            const $tableContainer = $('#tableContainer');
            const $toggleBtn = $('#viewToggle');
            
            if ($groupedView.is(':visible')) {
                // Switch to table view
                $groupedView.hide();
                $tableContainer.show();
                $toggleBtn.html('<i class="bi bi-table"></i> <span>Table View</span>');
                currentViewMode = 'table';
                localStorage.setItem('assetChecklistViewMode', 'detailed');
                
                loadTableData();
            } else {
                // Switch to grouped view
                $groupedView.show();
                $tableContainer.hide();
                $toggleBtn.html('<i class="bi bi-grid-3x3-gap"></i> <span>Grouped View</span>');
                currentViewMode = 'grouped';
                localStorage.setItem('assetChecklistViewMode', 'grouped');
            }
        }

        // Optimized table loading
        function loadTableData(pageIndex = 1) {
            const $container = $('#tableContainer');
            
            // Show loading state
            $container.html('<div class="text-center py-4"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>');
            
            // Use fetch API for better error handling
            const params = new URLSearchParams({
                pageIndex: pageIndex,
                pageSize: currentPageSize,
                searchTerm: currentSearchTerm
            });
            
            fetch(`${CONFIG.routes.loadTable}?${params}`)
                .then(response => {
                    if (!response.ok) throw new Error(`HTTP ${response.status}`);
                    return response.text();
                })
                .then(html => {
                    $container.html(html);
                    console.log('Successfully loaded page', pageIndex);
                })
                .catch(error => {
                    console.error('Error loading table:', error);
                    $container.html(
                        '<div class="alert alert-danger">' +
                        '<i class="bi bi-exclamation-triangle"></i> ' +
                        'Error loading data. Please refresh the page and try again.' +
                        '</div>'
                    );
                });
        }

        // Optimized pagination handling
        $(document).on('click', '.page-btn', function(e) {
            e.preventDefault();
            
            const $btn = $(this);
            if ($btn.closest('.disabled').length) {
                return false;
            }
            
            const pageIndex = $btn.data('page');
            if (pageIndex && currentViewMode === 'table') {
                loadTableData(pageIndex);
                
                // Smooth scroll to table top
                $('#tableContainer')[0].scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        });

        // Optimized delete form handling with better error management
        $(document).on('submit', '.delete-form', function(e) {
            e.preventDefault();
            
            const $form = $(this);
            const confirmMessage = $form.data('confirm');
            
            if (!confirmMessage || !confirm(confirmMessage)) {
                return false;
            }
            
            // Show loading state on button
            const $deleteBtn = $form.find('button[type="submit"]');
            const originalHtml = $deleteBtn.html();
            $deleteBtn.prop('disabled', true).html('<i class="bi bi-spinner-border"></i>');
            
            const formData = new FormData(this);
            
            fetch($form.attr('action'), {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    showAlert('success', result.message);
                    reloadCurrentView();
                } else if (result.requiresConfirmation) {
                    showEnhancedAssetCheckListDeleteDialog(result);
                } else {
                    showAlert('warning', result.message);
                }
            })
            .catch(error => {
                console.error('Error deleting asset checklist:', error);
                showAlert('danger', 'Error deleting asset checklist. Please try again.');
            })
            .finally(() => {
                // Restore button state
                $deleteBtn.prop('disabled', false).html(originalHtml);
            });
        });

        // Utility function to show alerts
        function showAlert(type, message) {
            $('.alert').remove();
            const alertHtml = `
                <div class="alert alert-${type} alert-dismissible fade show mt-3" role="alert">
                    <i class="bi bi-${type === 'success' ? 'check-circle-fill' : 'exclamation-triangle-fill'}"></i> ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            `;
            $(alertHtml).insertAfter('.asset-header-row');
        }

        // Optimized view reload
        function reloadCurrentView() {
            if (currentViewMode === 'table') {
                const currentPage = $('.pagination .page-item.active .page-btn').data('page') || 1;
                loadTableData(currentPage);
            } else {
                location.reload();
            }
        }

        // FIXED: Enhanced delete dialog with correct navigation URLs
        function showEnhancedAssetCheckListDeleteDialog(result) {
            const relatedData = result.relatedData || {};
            const assetId = relatedData.assetId || result.assetId;
            
            const modalHtml = `
                <div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-responsive modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header bg-warning text-dark">
                                <h5 class="modal-title d-flex align-items-center gap-2">
                                    <i class="bi bi-exclamation-triangle"></i> 
                                    <span class="title-text">Cannot Delete Asset Checklist</span>
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body modal-body-responsive">
                                <div class="alert-message">
                                    ${result.message}
                                </div>
                                
                                <div class="related-data-container">
                                    <div class="related-data-title">
                                        <i class="bi bi-info-circle text-primary"></i>
                                        Related Data Details:
                                    </div>
                                    <div class="related-data-grid">
                                        <div class="data-item">
                                            <span class="data-label">Asset:</span>
                                            <span class="data-value">${relatedData.assetName || 'Unknown'}</span>
                                        </div>
                                        <div class="data-item">
                                            <span class="data-label">Checklist:</span>
                                            <span class="data-value">${relatedData.checkListName || 'Unknown'}</span>
                                        </div>
                                        <div class="data-item">
                                            <span class="data-label">Inspection Records:</span>
                                            <span class="data-value">${relatedData.inspectionRecordsCount || 0}</span>
                                        </div>
                                        <div class="data-item">
                                            <span class="data-label">First Inspection:</span>
                                            <span class="data-value">${relatedData.firstInspectionDate || 'N/A'}</span>
                                        </div>
                                        <div class="data-item">
                                            <span class="data-label">Last Inspection:</span>
                                            <span class="data-value">${relatedData.lastInspectionDate || 'N/A'}</span>
                                        </div>
                                        <div class="data-item">
                                            <span class="data-label">Employees Involved:</span>
                                            <span class="data-value">${relatedData.totalEmployees || 0} employee(s)</span>
                                        </div>
                                    </div>
                                    
                                    ${generateEmployeesList(relatedData)}
                                    ${generateFrequenciesList(relatedData)}
                                </div>
                                
                                <div class="options-container">
                                    <div class="options-title mb-3">
                                        <i class="bi bi-exclamation-triangle text-warning"></i>
                                        You have two options:
                                    </div>
                                    <div class="action-buttons d-flex flex-column flex-sm-row gap-2">
                                        <button type="button" class="btn btn-info btn-action d-flex align-items-center justify-content-center gap-2" 
                                                onclick="showManageAssetCheckListRelatedData('${result.assetCheckListId}', '${relatedData.assetName}', '${relatedData.checkListName}', '${assetId}')">
                                            <i class="bi bi-list-check"></i> 
                                            <span class="btn-text">Show me what to delete first</span>
                                        </button>
                                        <button type="button" class="btn btn-danger btn-action d-flex align-items-center justify-content-center gap-2" 
                                                onclick="confirmAssetCheckListForceDelete('${result.assetCheckListId}', '${relatedData.assetName}', '${relatedData.checkListName}')">
                                            <i class="bi bi-trash"></i> 
                                            <span class="btn-text">Force delete everything</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer modal-footer-responsive">
                                <button type="button" class="btn btn-secondary btn-responsive" data-bs-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Remove existing modal and add new one
            $('#deleteModal').remove();
            $('body').append(modalHtml);
            $('#deleteModal').modal('show');
        }

        // Helper functions for generating HTML sections
        function generateEmployeesList(relatedData) {
            if (!relatedData.employeeNames || relatedData.employeeNames.length === 0) return '';
            
            const employeeTags = relatedData.employeeNames.map(emp => `<span class="item-tag">${emp}</span>`).join('');
            const moreEmployees = relatedData.totalEmployees > relatedData.employeeNames.length 
                ? `<span class="more-items">... and ${relatedData.totalEmployees - relatedData.employeeNames.length} more</span>` 
                : '';
            
            return `
                <div class="affected-items-section">
                    <strong class="section-title">Employees:</strong>
                    <div class="items-list">
                        ${employeeTags}
                        ${moreEmployees}
                    </div>
                </div>
            `;
        }

        function generateFrequenciesList(relatedData) {
            if (!relatedData.inspectionFrequencies || relatedData.inspectionFrequencies.length === 0) return '';
            
            const frequencyTags = relatedData.inspectionFrequencies.map(freq => `<span class="item-tag">${freq}</span>`).join('');
            const moreFrequencies = relatedData.totalFrequencies > relatedData.inspectionFrequencies.length 
                ? `<span class="more-items">... and ${relatedData.totalFrequencies - relatedData.inspectionFrequencies.length} more</span>` 
                : '';
            
            return `
                <div class="affected-items-section">
                    <strong class="section-title">Inspection Frequencies:</strong>
                    <div class="items-list">
                        ${frequencyTags}
                        ${moreFrequencies}
                    </div>
                </div>
            `;
        }

        // FIXED: Management dialog with correct navigation routes
        function showManageAssetCheckListRelatedData(assetCheckListId, assetName, checkListName, assetId) {
            $('#deleteModal').modal('hide');
            
            const managementOptionsHtml = `
                <div class="modal fade" id="manageModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-responsive modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header bg-info text-white">
                                <h5 class="modal-title d-flex align-items-center gap-2">
                                    <i class="bi bi-list-check"></i> 
                                    <span class="title-text">Manage Related Data: ${assetName} - ${checkListName}</span>
                                </h5>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body modal-body-responsive">
                                <p class="mb-3">You need to manage the following before deleting this asset checklist:</p>
                                <div class="management-options">
                                        <div class="option-content">
                                            <strong class="option-title">Delete Inspection History</strong>
                                            <small class="option-description">Delete inspection records for this asset</small>
                                        </div>
                                    <a href="${CONFIG.routes.assetDetails}?searchTerm=${encodeURIComponent(assetName)}" class="management-option">
                                        <div class="option-icon">
                                            <i class="bi bi-box"></i>
                                        </div>
                                        <div class="option-content">
                                            <strong class="option-title">View Related Asset Details</strong>
                                            <small class="option-description">See the asset this checklist is assigned to</small>
                                        </div>
                                        <div class="option-arrow">
                                            <i class="bi bi-arrow-right"></i>
                                        </div>
                                    </a>
                                    <div class="management-option alternative-option">
                                        <div class="option-icon">
                                            <i class="bi bi-info-circle text-info"></i>
                                        </div>
                                        <div class="option-content">
                                            <strong class="option-title">Alternative: Force Delete</strong>
                                            <small class="option-description">Or you can force delete to remove all related data automatically</small>
                                            <button type="button" class="btn btn-danger btn-sm mt-2 force-delete-btn" 
                                                    onclick="confirmAssetCheckListForceDelete('${assetCheckListId}', '${assetName}', '${checkListName}')">
                                                <i class="bi bi-trash"></i> Force Delete
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer modal-footer-responsive">
                                <button type="button" class="btn btn-secondary btn-responsive" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            $('#manageModal').remove();
            $('body').append(managementOptionsHtml);
            $('#manageModal').modal('show');
        }
    </script>
}

<style>
/* AssetCheckList Search Section Styles */
.search-section {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 1rem;
    margin-top: 1rem;
}

.search-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
}

.search-input-group {
    position: relative;
    flex: 1;
    min-width: 250px;
    max-width: 500px;
    margin-right: 1rem;
}

.search-icon {
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: #6c757d;
}

.search-input {
    width: 100%;
    padding: 0.75rem 2rem 0.75rem 2.5rem;
    border: 2px solid #e9ecef;
    border-radius: 6px;
    font-size: 0.95rem;
    transition: all 0.3s ease;
    background: white;
}

.search-input:focus {
    outline: none;
    border-color: #0d6efd;
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

.clear-search-btn {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #6c757d;
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 3px;
    transition: color 0.2s ease;
}

.clear-search-btn:hover {
    color: #dc3545;
    background: rgba(220, 53, 69, 0.1);
}

.search-info {
    display: flex;
    align-items: center;
    font-size: 0.9rem;
    color: #6c757d;
    margin-top: 0.5rem;
}

.search-results-count {
    font-weight: 500;
    color: #333;
    margin-right: 0.2rem;
}
</style>